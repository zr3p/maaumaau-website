---
// Analytics component
---

<script defer src="https://denhamgreen.eu/script.js" data-website-id="94a870a9-8453-460f-937b-6edbf12fef13"></script>

<script>
(function() {
    function waitForUmami() {
        if (typeof umami !== 'undefined') {
            trackUrlParameters();
        } else {
            setTimeout(waitForUmami, 200);
        }
    }

    function trackUrlParameters() {
        const urlParams = new URLSearchParams(window.location.search);
        
        const utmSource = urlParams.get('utm_source');
        const utmMedium = urlParams.get('utm_medium'); 
        const utmCampaign = urlParams.get('utm_campaign');
        const ref = urlParams.get('ref');
        
        if (utmSource) {
            umami.track('QR Code Scan', { 
                source: utmSource, 
                medium: utmMedium || 'unknown',
                campaign: utmCampaign || 'unknown'
            });
        }
        
        if (ref) {
            umami.track('Referrer Visit', { referrer: ref });
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', waitForUmami);
    } else {
        waitForUmami();
    }
})();
</script>